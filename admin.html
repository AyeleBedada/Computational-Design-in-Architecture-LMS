<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard â€” LMS</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body data-page="admin">
  <div class="topbar" role="banner"></div>
  <div class="container main-wrapper" style="gap:18px">
    <aside class="sidebar" role="navigation"></aside>

    <main class="content" role="main">
      <div class="card">
        <h1>Admin Dashboard</h1>
        <p class="lead">Manage quiz availability, view reports and export CSVs.</p>

        <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
          <button id="exportCSV" class="btn">Export Reports (CSV)</button>
          <button id="refreshReports" class="btn btn-ghost">Refresh</button>
        </div>

        <section id="adminControls" style="margin-top:12px">
          <h3>Quiz Availability</h3>
          <div id="adminQuizToggles"></div>
        </section>

        <section id="adminReports" style="margin-top:12px">
          <h3>Recent Reports</h3>
          <div id="adminReportsList" class="card"></div>
        </section>

        <section id="adminCharts" style="margin-top:12px">
          <h3>Analytics</h3>
          <div id="adminChartWrap" style="min-height:220px">(Charts will render here)</div>
        </section>
      </div>
    </main>
  </div>

  <script src="js/auth.js"></script>
  <script src="js/progress.js"></script>
  <script src="js/forum.js"></script>
  <script src="js/quiz.js"></script>
  <script src="js/admin.js"></script>
  <script>
    // admin wiring: ensure only admin can stay here
    document.addEventListener('DOMContentLoaded', () => {
      if (!AUTH.getSession()) return location.href = 'index.html';
      AUTH.renderChrome('admin'); // inject header + sidebar via auth
      // admin.js will handle the rest (it expects admin session)
    });
  </script>
</body>
</html>
