<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course Complete</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="topbar"></div>
<div class="sidebar"></div>

<main>
<h1>Congratulations!</h1>
<p>You have successfully completed the course.</p>

<section id="certificate-section">
    <button id="generate-certificate">Download Certificate</button>
</section>

</main>

<script src="js/auth.js"></script>
<script src="js/progress.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    AUTH.renderChrome('complete');

    document.getElementById('generate-certificate').addEventListener('click', () => {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(24);
        doc.text("Certificate of Completion", 20, 40);
        const userName = localStorage.getItem('SESSION_USER') || 'Student';
        doc.setFontSize(16);
        doc.text(`This certificate is awarded to ${userName}`, 20, 60);
        const score = localStorage.getItem('GLOBAL_SCORE') || 'N/A';
        doc.text(`Final Score: ${score}%`, 20, 80);
        doc.save('Certificate.pdf');
    });
});
</script>
</body>
</html>
