<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unit 0 - Course Introduction</title>
<link rel="stylesheet" href="../css/style.css">
<style>
/* Sidebar dropdown */
.sidebar ul li {
    list-style: none;
    margin: 0;
    padding: 0.3rem 0;
    cursor: pointer;
}
.sidebar ul li ul {
    display: none;
    margin-left: 15px;
}
.sidebar ul li.active > ul {
    display: block;
}

/* Top navigation dropdown */
.topnav {
    background-color: #2ea15a;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}
.topnav > div, .topnav a {
    margin-left: 1rem;
    color: white;
    font-weight: 500;
    text-decoration: none;
    position: relative;
}
.topnav .dropdown {
    position: relative;
}
.topnav .dropdown-content {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #78bb7b;
    min-width: 180px;
    border-radius: 5px;
    z-index: 1000;
}
.topnav .dropdown-content a {
    color: black;
    padding: 0.5rem 1rem;
    display: block;
}
.topnav .dropdown:hover .dropdown-content {
    display: block;
}
.topnav .dropdown-content a:hover {
    background-color: #1b7a40;
    color: white;
}


.modal {
    position: fixed;
    z-index: 1000;
    left: 0; top: 0;
    width: 100%; height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}
.modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 2rem;
    border-radius: 10px;
    width: 300px;
    position: relative;
}
.close {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 1.5rem;
    cursor: pointer;
}
.modal-content input {
    width: 100%;
    margin-bottom: 1rem;
    padding: 0.5rem;
    border-radius: 5px;
    border: 1px solid #ccc;
}
.modal-content button {
    width: 100%;
}


</style>
</head>
<body>



<div class="main-wrapper">

<!-- Sidebar -->
<aside class="sidebar">
    <h2>Course Units</h2>
    <ul id="sidebar-menu">
        <li class="has-children">Unit 0
            <ul>
                <li><a href="0_quiz_0.html">Course Introduction Quiz</a></li>
            </ul>
        </li>
        <li class="has-children">Unit 1
            <ul>
                <li><a href="../Unit-1.1.1_introduction_Computational_Design/1.1.1_introduction_Computational_Design.html">1.1.1 Introduction</a></li>
                <li><a href="../Unit-1.2_handles_Manipulators/1.2_handles_Manipulators.html">1.2 Handles & Manipulators</a></li>
            </ul>
        </li>
        <li class="has-children">Unit 2
            <ul>
                <li><a href="../Unit-2.1_contemporary_Geometries/2.1_contemporary_Geometries.html">2.1 Contemporary Geometries</a></li>
            </ul>
        </li>
        <li class="has-children">Unit 3
            <ul>
                <li><a href="../Unit-3.1_digital_fabrication/3.1_digital_fabrication.html">3.1 Digital Fabrication</a></li>
            </ul>
        </li>
        <li class="has-children">Unit 4
            <ul>
                <li><a href="../Unit-4.1_introduction_BIM/4.1_introduction_BIM.html">4.1 Introduction to BIM</a></li>
            </ul>
        </li>
        <li><a href="../post_course_assessment.html">Post Course Assessment</a></li>
        <li><a href="../complete.html">Course Completion</a></li>
        <li><a href="../admin.html" id="admin-link">Admin Dashboard</a></li>
    </ul>
</aside>

<!-- Main Content -->
<div class="content">

<!-- Top Menu -->
<nav class="topnav">
    <span>Computational Design LMS</span>

    <div class="dropdown">Unit 0
        <div class="dropdown-content">
            <a href="0_quiz_0.html">Course Introduction Quiz</a>
        </div>
    </div>
    <div class="dropdown">Unit 1
        <div class="dropdown-content">
            <a href="../Unit-1.1.1_introduction_Computational_Design/1.1.1_introduction_Computational_Design.html">1.1.1 Introduction</a>
            <a href="../Unit-1.2_handles_Manipulators/1.2_handles_Manipulators.html">1.2 Handles & Manipulators</a>
        </div>
    </div>
    <div class="dropdown">Unit 2
        <div class="dropdown-content">
            <a href="../Unit-2.1_contemporary_Geometries/2.1_contemporary_Geometries.html">2.1 Contemporary Geometries</a>
        </div>
    </div>
    <div class="dropdown">Unit 3
        <div class="dropdown-content">
            <a href="../Unit-3.1_digital_fabrication/3.1_digital_fabrication.html">3.1 Digital Fabrication</a>
        </div>
    </div>
    <div class="dropdown">Unit 4
        <div class="dropdown-content">
            <a href="../Unit-4.1_introduction_BIM/4.1_introduction_BIM.html">4.1 Introduction to BIM</a>
        </div>
    </div>

    <a href="../post_course_assessment.html">Post Course Assessment</a>
    <a href="../complete.html">Course Completion</a>
    <a href="../admin.html" id="admin-top-link">Admin</a>
    <a href="#" id="change-pass-btn">Change Password</a>  

    <a href="../index.html" id="logout-btn">Logout</a>
</nav>


<h1>Unit 0 - Course Introduction</h1>
<div id="quiz-container"></div>

<!-- Forum -->
<div class="forum-container">
    <h3>Forum</h3>
    <div id="0_quiz_0-forum-messages"></div>
    <input type="text" id="forum-input" placeholder="Write a message...">
    <button id="forum-submit">Post</button>
</div>

<!-- Progress -->
<h3>Your Progress</h3>
<div class="progress-line-wrapper">
    <div class="progress-fill">0%</div>
</div>
<div class="circular-progress">
    <svg width="80" height="80">
        <circle class="bg" cx="40" cy="40" r="45"></circle>
        <circle class="progress" cx="40" cy="40" r="45"></circle>
    </svg>
</div>
<div class="stepped-progress">
    <div class="step"></div>
    <div class="step"></div>
    <div class="step"></div>
    <div class="step"></div>
</div>
</div>
</div>

<script src="../js/auth.js"></script>
<script src="../js/forum.js"></script>
<script src="../js/progress.js"></script>
<script src="../js/quiz.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const session = AUTH.getSession();
    if (!session) {
        window.location.href = "../index.html";
        return;
    }
    // Show admin links
    if (session.role === 'admin') {
        document.getElementById('admin-link').style.display = 'block';
        document.getElementById('admin-top-link').style.display = 'inline-block';
    }

    // Sidebar expand/collapse
    document.querySelectorAll('.has-children').forEach(item => {
        item.addEventListener('click', () => {
            item.classList.toggle('active');
        });
    });

    // Logout
    document.getElementById('logout-btn').addEventListener('click', () => {
        AUTH.logout();
        window.location.href = "../index.html";
    });

    // Load quiz
    const quizId = '0_quiz_0';
    const container = document.getElementById('quiz-container');
    QUIZ.initQuizPage(container, quizId);

    // Forum
    document.getElementById('forum-submit').addEventListener('click', () => {
        FORUM.post(quizId, document.getElementById('forum-input').value);
        document.getElementById('forum-input').value = '';
    });

    // Initialize progress
    const savedScore = parseInt(localStorage.getItem(`best_${quizId}_${session.username}`)) || 0;
    const total = (JSON.parse(localStorage.getItem(quizId)) || []).length;
    UIProgress.updateAllProgress(savedScore, total);
});

</script>


<div id="change-pass-modal" class="modal" style="display:none;">
    <div class="modal-content">
        <span id="close-pass-modal" class="close">&times;</span>
        <h3>Change Password</h3>
        <label for="username-pass">Username:</label>
        <input type="text" id="username-pass" placeholder="Enter your username">
        <label for="new-pass">New Password:</label>
        <input type="password" id="new-pass" placeholder="Enter new password">
        <button id="submit-pass-change">Update Password</button>
        <p id="pass-msg" style="color:red;"></p>
    </div>
</div>


<script src="js/change_password.js"></script>
</body>
</html>
